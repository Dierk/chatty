apply from: "$rootDir/gradle/integrationTest.gradle"

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.moowork.gradle:gradle-grunt-plugin:0.5'
    }
}

apply plugin: 'grunt'

task gruntTest(type: GruntTask) << {
    args = ["test"]
}

gruntTest.dependsOn ':com.toedter.chatty.server:startServerAsync'
task gruntIntegrationTest(dependsOn: [':com.toedter.chatty.server:stopServer',gruntTest] )

integrationTest.dependsOn gruntIntegrationTest;
gruntIntegrationTest.mustRunAfter ':com.toedter.chatty.server:integrationTest'